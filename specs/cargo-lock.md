# Cargo.lock Specification

## File Information

**Path:** `/Users/isudoajl/ownCloud/Projects/omega/Cargo.lock`

**Purpose:** The Cargo.lock file is an automatically-generated dependency lock file created and maintained by Cargo (Rust's package manager). It records the exact versions and checksums of every dependency (direct and transitive) used in the Omega project, ensuring reproducible builds across different machines and time periods.

**Generated By:** Cargo (automatically)
**File Status:** Auto-generated, checked into version control
**Last Modified:** Automatically updated when dependencies change

---

## Lock File Metadata

| Property | Value |
|----------|-------|
| **Format Version** | 4 |
| **Total Lines** | 3,333 |
| **Total Packages** | 331 |
| **Workspace Members** | 7 (omega + 6 crates) |
| **Primary Language** | Rust 2021 Edition |

---

## Workspace Structure

The Cargo.lock locks dependencies for the following workspace crates:

| Crate | Purpose |
|-------|---------|
| **omega** | Main binary - personal AI agent infrastructure |
| **omega-core** | Core types, traits, config, error handling, prompt sanitization |
| **omega-providers** | AI backend abstraction (Claude Code CLI, Anthropic, OpenAI, Ollama, OpenRouter) |
| **omega-channels** | Messaging platform integrations (Telegram, WhatsApp) |
| **omega-memory** | SQLite-based conversation history and audit logging |
| **omega-skills** | Skill/plugin system (planned) |
| **omega-sandbox** | Secure command execution sandboxing (planned) |

---

## Top-Level Dependencies & Resolved Versions

The Omega project directly depends on the following packages, with their locked versions:

### Async Runtime & Concurrency
- **tokio** `1.49.0` - Asynchronous runtime with full feature set
- **async-trait** `0.1.89` - Async function support in traits

### Serialization & Configuration
- **serde** `1.0.228` - Serialization/deserialization framework with derive macros
- **serde_json** `1.0.149` - JSON support for serde
- **toml** `0.8.23` - TOML file parsing and serialization

### CLI & Command Line
- **clap** `4.5.58` - Command-line argument parser with derive macros

### Error Handling
- **thiserror** `2.0.18` - Error enum derivation and Display implementation
- **anyhow** `1.0.101` - Flexible error handling with context

### HTTP Client
- **reqwest** `0.12.28` - HTTP client with JSON and Rustls TLS support

### Database
- **sqlx** `0.8.6` - SQLx runtime for Tokio with SQLite driver

### Logging & Observability
- **tracing** `0.1.44` - Structured, composable diagnostic tracing framework
- **tracing-subscriber** `0.3.19` - Composable tracing utilities with env-filter support

### Utilities
- **uuid** `1.21.0` - UUID generation (v4) with serde support
- **chrono** `0.4.43` - Date and time library with serde support
- **libc** `0.2.168` - FFI bindings to system libc (for root detection via geteuid)

---

## Notable Transitive Dependencies

Beyond direct dependencies, Cargo.lock resolves 320+ transitive dependencies. Key ones include:

### Cryptography & Security (via reqwest/sqlx)
- **openssl** - TLS/SSL support
- **rustls** - Pure Rust TLS implementation
- **x509-parser** - X.509 certificate parsing
- **ring** - Cryptographic primitives

### Async Utilities
- **tokio-util** - Utilities for working with Tokio
- **tokio-stream** - Stream combinators for Tokio futures
- **futures** - Async primitives and combinators
- **pin-project** - Projection utilities for pin

### Serialization Infrastructure
- **serde_derive** - Derive macro implementation for serde
- **serde_spanned** - Spanned value support
- **serde_urlencoded** - URL encoding support

### Macro Support
- **proc-macro2** - Procedural macro bridge library
- **quote** - Rust code quote generation
- **syn** - Rust syntax tree parsing

### Parsing & String Handling
- **regex** - Regular expression engine
- **aho-corasick** - Multi-pattern string matching
- **unicode-width** - Unicode width calculation
- **utf8parse** - UTF-8 parsing

### HTTP & Networking
- **hyper** - HTTP implementation underlying reqwest
- **http** - HTTP semantics types
- **h2** - HTTP/2 protocol
- **tower** - Modular request processing middleware

### SQL & Database
- **sqlx-core** - Core SQLx functionality
- **sqlx-sqlite** - SQLite driver implementation
- **sqlx-macros** - Compile-time SQL verification macros
- **rusqlite** - SQLite bindings

### System & Platform
- **libc** - C standard library FFI
- **winapi** / **windows** - Windows API bindings
- **mio** - Low-level I/O abstraction
- **parking_lot** - Better synchronization primitives

### Time
- **chrono** - Date/time (direct)
- **time** - Alternative time library
- **tzdata** - Timezone database

### Testing & Development
- **proptest** - Property-based testing
- **criterion** - Benchmarking framework
- **tokio-test** - Tokio testing utilities

---

## Dependency Tree Statistics

- **Total Package Count:** 331
- **Binary Dependencies:** 18 (crates with build scripts or binaries)
- **Pure Rust Dependencies:** 313
- **Platform-Specific Dependencies:** 25+ (windows-sys, libc variants, android_system_properties)
- **Build Script Dependencies:** ~40 (for compilation, not runtime)

---

## Key Constraints & Configuration

### Workspace Package Configuration
```toml
[workspace.package]
version = "0.1.0"
edition = "2021"
license = "MIT OR Apache-2.0"
repository = "github.com/omega-cortex/omega"
```

### Workspace Dependency Overrides
- **tokio:** `version = "1"` with `features = ["full"]`
- **serde:** `version = "1"` with `features = ["derive"]`
- **reqwest:** `version = "0.12"` with `["json", "rustls-tls"]`
- **sqlx:** `version = "0.8"` with `["runtime-tokio", "sqlite"]`
- **tracing-subscriber:** `version = "0.3"` with `["env-filter"]`
- **clap:** `version = "4"` with `["derive"]`
- **uuid:** `version = "1"` with `["v4", "serde"]`
- **chrono:** `version = "0.4"` with `["serde"]`

---

## Important Notes

1. **Automatic Generation:** This file is generated automatically by `cargo update` and `cargo build` commands. Manual editing is not recommended.

2. **Version Control:** Cargo.lock is committed to version control for binary crates and applications (like Omega) to ensure reproducible builds.

3. **Reproducibility:** When cloning this repository and running `cargo build`, Cargo will use the exact versions specified in Cargo.lock, not the latest versions allowed by Cargo.toml.

4. **Update Process:** To update dependencies:
   ```bash
   cargo update                    # Updates within version constraints
   cargo update -p <package-name>  # Updates specific package
   ```

5. **Checksum Verification:** Each package includes a SHA-256 checksum for integrity verification.

6. **Platform Considerations:** The lock file includes platform-specific conditional dependencies (e.g., `cfg(windows)`, `cfg(unix)`).

---

## Building with This Lock File

To ensure reproducible builds using this lock file:

```bash
# Standard build (uses locked versions)
cargo build --release

# Offline build (if dependencies are cached)
cargo build --release --offline

# Verify lock file is up-to-date
cargo update --dry-run
```

If the lock file is out of sync with Cargo.toml, Cargo will automatically update it during build.

---

## Related Files

- **Cargo.toml** - Workspace manifest with dependency declarations
- **Cargo.toml** (per crate) - Individual crate manifests
- **.cargo/config.toml** - Cargo configuration (if present)
